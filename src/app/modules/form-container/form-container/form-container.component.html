<form *ngIf="formGroup | async as formGroupValue" class="form-container" [formGroup]="formGroupValue">
  <ng-container *ngFor="let fieldName of (formFieldsKeys | async)">
    <ng-container [ngSwitch]="formFields[fieldName].type">
      <div *ngSwitchCase="FormFieldType.select">
        <label>
          {{formFields[fieldName].label}}
          <select class="form-field" [formControlName]="fieldName">
            <option *ngFor=" let item of formFields[fieldName].options || []" [ngValue]="item.value">
              {{item.label}}
            </option>
          </select>
        </label>
      </div>
      <div *ngSwitchCase="FormFieldType.switch">
        <tsc-ui-switch [label]="formFields[fieldName].label || 'some label'" [(value)]="formFields[fieldName].value">
        </tsc-ui-switch>
      </div>
      <div *ngSwitchDefault>
        <input class="form-field" placeholder="Введите значение" [type]="formFields[fieldName].type"
          [(ngModel)]="formFields[fieldName].value" [name]="fieldName"
          [ngClass]="{valid:formFields[fieldName].isValid, invalid: !formFields[fieldName].isValid}">
        {{formFields[fieldName].isValid}}
      </div>
    </ng-container>
  </ng-container>
  {{formFields | json}}
</form>
